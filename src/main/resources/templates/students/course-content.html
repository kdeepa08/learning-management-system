<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Course Content</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet">
</head>

<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>

<!-- Use layout with content -->
<div th:replace="~{fragments/sidebar :: layout(~{::content})}">
  <div th:fragment="content">

      <div class="container mt-4">

        <h2 th:text="${course.title}" class="text-center mb-4"></h2>

        <div th:if="${contents.isEmpty()}" class="alert alert-info text-center">
          No content uploaded yet.
        </div>

        <div class="row" th:each="c : ${contents}">
          <div class="col-md-6 mb-4">
            <div class="card shadow-sm">

              <div class="card-body">
                <h5 class="card-title" th:text="${c.title}"></h5>

                <p class="text-muted small">
                  Uploaded:
                  <span th:text="${#temporals.format(c.uploadedAt, 'yyyy-MM-dd HH:mm')}"></span>
                </p>

                <!-- IMAGE -->
                <div th:if="${c.contentType.name() == 'IMAGE'}">
                  <img th:src="@{${c.contentUrl}}"
                       class="img-fluid rounded mb-3" alt="Image Content">
                </div>

                <!-- PDF -->
                <div th:if="${c.contentType.name() == 'PDF'}">
                  <h5>
                    <a th:href="@{${c.contentUrl}}" target="_blank"
                       class="text-decoration-none text-primary"
                       th:text="${c.title + ' Open PDF '}">
                    </a>
                  </h5>

                </div>


                <!-- VIDEO -->
                <div th:if="${c.contentType.name() == 'VIDEO'}">
                  <video width="100%" controls class="rounded">
                    <source th:src="@{${c.contentUrl}}" type="video/mp4">
                    Your browser does not support the video tag.
                  </video>
                </div>

                <div class="mt-3">
                  <a th:href="@{${c.contentUrl}}" class="btn btn-outline-secondary btn-sm" target="_blank">
                    Download File
                  </a>
                </div>

              </div>
            </div>
          </div>
        </div>

      </div>
  </div>
</div>
</body>
</html>
